@inject IHtmlLocalizer<ProgettoIUM.Web.Features.Segnalazioni.IndexViewModel> ModelLocalizer
@model ProgettoIUM.Web.Features.Segnalazioni.IndexViewModel

@{
    ViewData["Title"] = "Dashboard Operatori";
}

<div class="container-fluid px-5 mt-4">
    <h2 class="fw-bold border-bottom pb-2 mb-4">DASHBOARD</h2>

    <div class="mb-5">
        <h5 class="fw-bold mb-3">Elenco segnalazioni</h5>

        <form asp-action="Index" method="get" class="d-flex align-items-center gap-2 mb-4">
            <div class="col-md-2">
                <label asp-for="Filter" class="small fw-bold d-block mb-1">Cerca</label>
                <input asp-for="Filter" class="form-control form-control-sm rounded-pill border shadow-sm" />
            </div>
            <div class="mt-4">
                <button type="submit" class="btn btn-primary btn-sm rounded-pill px-4 shadow-sm" style="background-color: #74a2ff; border: none;">Filtra</button>
                <a asp-action="Index" class="btn btn-light btn-sm rounded-pill px-3 border shadow-sm text-muted">X Azzurra ricerca</a>
            </div>
        </form>

        <div class="table-responsive border-0 shadow-sm rounded-4 bg-white">
            <table class="table table-hover align-middle mb-0">
                <thead class="bg-light text-secondary text-uppercase" style="font-size: 0.7rem; letter-spacing: 1px;">
                    <tr>
                        <th class="border-0 py-3 px-4">Codice</th>
                        <th class="border-0">Priorità</th>
                        <th class="border-0">Stato</th>
                        <th class="border-0">Luogo</th>
                        <th class="border-0">Categoria</th>
                        <th class="border-0">Data Invio</th>
                        <th class="border-0 text-end px-4">Dettaglio</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var s in Model.Segnalazioni)
                    {
                        <tr style="transition: all 0.2s ease;">
                            <td class="px-4">
                                <span class="fw-bold text-dark">#@s.Id.ToString().Substring(0, 8).ToUpper()</span>
                            </td>
                            <td>
                                @if (s.Priorità == "Alta")
                                {
                                    <span class="badge bg-danger-subtle text-danger px-3 py-2 rounded-pill">
                                        Alta
                                    </span>
                                }
                                else if (s.Priorità == "Media")
                                {
                                    <span class="badge bg-warning-subtle text-warning-emphasis px-3 py-2 rounded-pill">
                                         Media
                                    </span>
                                }
                                else
                                {
                                    <span class="badge bg-success-subtle text-success px-3 py-2 rounded-pill">
                                         Bassa
                                    </span>
                                }
                            </td>
                            <td>
                                @if (s.Stato == "Nuova - In attesa di verifica")
                                {
                                    <span class="badge bg-primary-subtle text-secondary px-3 py-2 rounded-pill border border-secondary-subtle">
                                        @s.Stato
                                    </span>
                                }
                                else if(s.Stato == "Chiusa")
                                {
                                    <span class="badge bg-success-subtle text-secondary px-3 py-2 rounded-pill border border-secondary-subtle">
                                        <i class="fa-solid fa-check me-1"></i>@s.Stato
                                    </span>
                                }
                                else
                                {
                                    @* Colore univoco moderno: Grigio/Blu Soft *@
                                    <span class="badge bg-secondary-subtle text-secondary px-3 py-2 rounded-pill border border-secondary-subtle">
                                        <i class="fa-solid fa-clock me-1"></i> @s.Stato
                                    </span>
                                    
                                }
                              
                            </td>
                            <td class="text-muted">@s.Luogo</td>
                            <td class="text-muted">@s.Categoria</td>
                            <td class="text-muted small">@s.DataInvio.ToString("MMM dd, HH:mm")</td>
                            <td class="text-end px-4">
                                <a asp-action="Edit" asp-route-id="@s.Id" class="btn btn-outline-primary btn-sm rounded-circle border-0">
                                    <i class="fa-solid fa-arrow-right"></i>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

       
    </div>
</div>

<div class="text-center mt-auto py-4">
    <small class="text-muted">Manuel Ragazzini - Mactar Ibrahima Seck AA 2025/2026</small>
</div>
